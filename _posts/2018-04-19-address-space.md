---
layout: post
title: 计算机内存与寻址空间
abstract: 计算机内存与寻址空间
category: technical
permalink: address-space
author: 木逸辰
tags: [tech, system, memeory, address]
---

### {{ page.title }}

计算机程序在运行时，程序所需的代码和数据都会被加载到内存中，因为CPU从内存读取数据要比从硬盘快得多得多。因此，内存的大小决定了计算机能够运行的程序大小的物理上限，早几年很多时候解决电脑太慢太卡的办法就是添加内存条。但有时候当内存扩展到一定程度，再继续扩展也没效果了，因为超出了计算机能够使用的极限，多出来的就属于无效空间，只能浪费了。而这个计算机能够使用的内存空间大小，就是所谓的**寻址空间(Address Space)**。

寻址空间(Address Space)，顾名思义，就是可用地址的范围。对用户程序而言，计算机的内存可以看作是一个字节序列，或者数据数组。数据在内存空间的位置即是数据的内存地址，计算机就是根据这个地址去从内存中读取需要的数据。所以计算机能够使用的内存空间大小取决于两点：内存的实际大小，和所能使用的地址大小——也就是寻址空间。内存的大小当然就是由内存条的容量和数量决定，一般都可以自主扩展。但寻址空间则取决于计算机系统的**Word Size**。

**Word Size**就是每个word的大小，也就是有多少个bit字节。32位系统即每个word有32个bit，也就是4个byte。相应的，64位系统即每个word有64个bit，也就是8个byte。目前绝大部分个人电脑都使用64位系统，10年前还是32位居多。Word Size决定了这个系统里计算机能够表达的最大数字，也就决定了寻址空间的大小。对于拥有**w**-bit的的系统，能表达的最大整数就是 2<sup>w</sup> - 1 。32位系统能够表达的最大整数就是 2<sup>32</sup> - 1，所以32位系统能够使用的最大地址索引就是(2<sup>32</sup> - 1)，即最大寻址空间为 2<sup>32</sup>bit = 4GB，即使物理内存更多，计算机也只能使用4GB的内存。从而导致添加内存条也不会让电脑运行更快。

相应的，64位系统的最大寻址空间即为 2<sup>64</sup>bit = 16384PB，甚至远超一般计算机的硬盘存储空间了，可以说相当长的一段时间内都完全够用了。